<div class="container">
    <div class="row">
        <p class="form-group col-sm-12">
            <input type="text" placeholder="Find user..." class="form-control"
                   uib-typeahead="userItem as userItem.username for userItem in getUsers($viewValue)"
                   ng-model="user">
        </p>
    </div>

    <h2>{{ user._id ? 'Update user' : 'Create user' }}</h2>
    <form name="editUser" novalidate data-ng-submit="submit()">
        <div class="form-group">
            <label for="editUserUsername">Username</label>
            <input type="text" class="form-control" id="editUserUsername" data-ng-model="user.username" name="username" required>
            <div data-ng-show="editUser.username.$invalid">
                <p class="error" data-ng-show="editUser.username.$error.required">
                    Username must be supplied
                </p>
            </div>
        </div>
        <div data-ng-show="user._id">
            <button type="button" class="btn btn-danger" data-ng-click="deleteUser()">Delete user?</button>
        </div>
        <div class="row">
            <div class="form-group col-sm-6">
                <label for="editUserGroup">Group</label>
                <select id="editUserGroup" class="form-control" name="group"
                        data-ng-model="user.group"
                        data-ng-options="group._id as group.name for group in groups" required></select>
                <div data-ng-show="editUser.group.$invalid">
                    <p class="error" data-ng-show="editUser.group.$error.required">
                        Group must be supplied
                    </p>
                </div>
            </div>
            <div class="form-group col-sm-6">
                <label for="editUserTitle">Title</label>
                <input type="text" class="form-control" id="editUserTitle" data-ng-model="user.title">
            </div>
        </div>
        <div class="row">
            <div class="form-group col-sm-6">
                <label for="editUserPassword">Password</label>
                <input type="text" class="form-control" id="editUserPassword" data-ng-model="user.password">
            </div>
            <div class="form-group col-sm-6">
                <label for="editUserEmail">Email</label>
                <input type="email" class="form-control" id="editUserEmail" data-ng-model="user.email" name="email" required>
                <div data-ng-show="editUser.username.$error.required">
                    <p class="error" data-ng-show="editUser.email.$error.required">Email must be supplied</p>
                    <p class="error" data-ng-show="editUser.email.$error.email">Email is incorrect format</p>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="form-group col-sm-6">
                <label for="editUserLocation">Location</label>
                <input type="text" class="form-control" id="editUserLocation" data-ng-model="user.location">
            </div>
            <div class="form-group col-sm-6">
                <label for="editUserStyle">Style</label>
                <input type="number" class="form-control" id="editUserStyle" data-ng-model="user.style">
            </div>
        </div>
        <div class="form-group">
            <label for="editUserAvatar">Avatar</label>
            <input type="file" class="form-control" id="editUserAvatar">
            <img data-ng-src="{{user.avatarUrl}}" alt="{{user.username}}">
        </div>
        <div class="row">
            <div class="form-group col-sm-6">
                <label for="editUserActive">Active</label>
                <input type="checkbox" class="form-control" id="editUserActive" data-ng-model="user.active">
            </div>
            <div class="form-group col-sm-6">
                <label for="editUserSendEmail">Send email?</label>
                <input type="checkbox" class="form-control" id="editUserSendEmail" data-ng-model="user.sendEmail">
            </div>
        </div>
        <div class="btn-group">
            <button type="submit" class="btn btn-success">{{ user._id ? 'Update':'Create' }}</button>
            <button type="button" class="btn" data-ng-if="user._id" data-ng-click="cancelEditMode()">Cancel edit mode</button>
        </div>
    </form>
    <p><a href="manage" class="btn btn-info">Back to admin system</a></p>
</div>