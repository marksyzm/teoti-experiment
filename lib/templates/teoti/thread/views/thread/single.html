<article class="thread panel">
    <header class="panel-heading" ng-if="thread">
        <a class="panel-heading-img hidden-sm hidden-xs pull-right" href="{{thread.firstPostUser.url}}"
           ng-if="thread.firstPostUser.avatar"
           uib-tooltip="{{thread.firstPostUser.username}}">
            <img ng-src="{{thread.firstPostUser.avatarUrl}}" alt="{{thread.firstPostUser.username}}">
        </a>
        <h1>{{thread.title}}</h1>
        <p>
            <span>
                <a href="{{thread.forum.url}}">
                    <img class="icon iconForum" ng-src="{{thread.forum.iconUrl}}" alt="{{thread.forum.title}}" />
                    {{thread.forum.title}}
                </a>
            </span>
            <span>
                <a href="{{thread.firstPostUser.url}}">
                    <img class="icon visible-sm-inline-block visible-xs-inline-block" ng-if="thread.firstPostUser.avatar" ng-src="/sickle/icon?url={{thread.firstPostUser.avatarUrl}}" alt="{{thread.firstPostUser.username}}">
                    {{thread.firstPostUser.username}}
                </a>
            </span>
            <span am-time-ago="thread.created" uib-tooltip="{{thread.created | amDateFormat:'Do MMM YYYY, h:mm:ss a'}}"></span>
            <span>{{thread.replyCount}} comment{{thread.replyCount === 1 ? '' : 's'}}</span>
            <span>{{thread.viewCount}} view{{thread.viewCount === 1 ? '' : 's'}}</span>
        </p>
    </header>
    <div class="panel-body">
        <div class="thread-content"
             ng-if="thread.firstPost.content"
             bind-html-compile="thread.firstPost.content | bbcode"></div>
        <div class="thread-buttons">
            <div class="btn-group" ng-show="thread.related">
                <a href="{{thread.related}}" target="_blank" class="btn btn-info">Related</a>
            </div>
            <div class="btn-group dropdown pull-right" uib-dropdown>
                <button class="btn btn-primary" type="button" ng-click="reply(post)">Reply</button>
                <button class="btn btn-primary" id="single-button-{{post._id}}" type="button"
                        aria-haspopup="true" aria-expanded="false" uib-dropdown-toggle>
                    <span class="caret"></span>
                    <span class="sr-only">Menu</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="single-button-{{post._id}}">
                    <li><a href role="menuitem" ng-click="edit(post)">Edit</a></li>
                    <li role="separator" class="divider"></li>
                    <li><a href role="menuitem" ng-click="report(post)">Report</a></li>
                    <li><a href role="menuitem" class="text-danger" ng-click="delete(post)">Delete</a></li>
                </ul>
            </div>
        </div>
    </div>
</article>
<section posts
         first-post-id="thread.firstPost._id"
         thread-id="threadId"
         forum-slug="forumSlug"
         page="page"></section>